# EC2 Key Pair 생성

> https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/ec2-key-pairs.html

- EC2 Key Pair 는 퍼블릭 키와 프라이빗 키로 구성된다.
- EC2 인스턴스에 연겨할 때 자격 증명 입증에 사용하는 보안 자격 증명 집합이다.
- EC2 는 퍼블릭 키를 인스턴스에 저장하고, 프라이빗 키는 사용자가 저장한다.
- Linux 인스턴스의 경우 프라이빗 키를 사용하여 인스턴스에 안전하게 SSH 로 연결할 수 있다.

> EC2의 키 페어 메뉴에서 키 페어를 생성

![aws-ec2-keypair](https://user-images.githubusercontent.com/47518272/174827069-bc0922d3-d379-4e2a-aeaf-5993cb4a7c42.png)

# 망 구성

![aws-mang](https://user-images.githubusercontent.com/47518272/174827406-56f6efae-90ea-4a7b-865b-0c983d3d4df6.png)

> https://docs.aws.amazon.com/ko_kr/vpc/latest/userguide/what-is-amazon-vpc.html

- 하나의 서브넷(Ex. public subnet 10.0.1.0/24)을 망이라 할 수 있다.
- __Region: 국가/지역__
- __Availability Zone: 데이터 센터__
  - ap-northeast-2a, 2b
- __VPC(Virtual Private Cloud)__
  - Amazon VPC 는 Amazon EC2 의 네트워킹 계층, 사용자의 AWS 계정 전용 가상 네트워크
  - 서브넷: VPC 의 ip 범위
  - 하나의 Region 에 종속
  - 다수의 AZ 설정 가능
  - VPC IP 대역 내에서 망구성
  - ![aws-vpc](https://user-images.githubusercontent.com/47518272/174828778-6b073f5a-673e-4184-98f3-8ec5a6588759.png)
- __Router__
  - 서로 다른 네트워크간의 통신을 중계
  - 라우팅 테이블에 정보가 있을 때: Forwarding
  - 라우팅 테이블에 정보가 없을 때: Drop
  - 라우팅 프로토콜을 활용하여, 어떤 대역으로 패킷을 보내는 것이 최적 경로인지 학습
  - __라우터를 통해서 다수의 망 사이의 통신을 중계 한다고 생각하면 됨__
- __외부 네트워크와의 통신__
  - public ip 가 있어야 함
  - 라우터는 private ip 가 목적지일 경우 인터넷 구간(internet-gateway)으로 보내지 않음
  - 내부망은?
    - 내부망도 라이브러리 설치 등을 위해 내부망 -> 인터넷 접근이 필요한 경우가 있다.
    - 이 경우 private ip 를 public ip 로 변환(NAT)한 후 인터넷에 접근한다.
    - 따라서, NAT 장비는 외부망에 존재해야 함

## 구성

![aws-mang2](https://user-images.githubusercontent.com/47518272/174831341-bb80851d-a0fc-436a-a727-215a5a0e399a.png)

- 외부망에 서브넷 2개
  - 외부망은 인터넷 구간과 연결 가능하도록
- 내부망에 서브넷 2개
  - 내부망은 인터넷 구간(internet-gateway)과는 연결이 불가하지만, 인터넷은 연결이 가능하도록


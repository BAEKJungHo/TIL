# 인덱스 생성과 색인

- `createIndex()`

```java
boolean acknowledged = false;
RestHighLevelClient client = createConnection();

String document = getStringFromFile("/documents/doc_" + docName + ".json");

CreateIndexResponse createIndexResponse;
CreateIndexRequest request = new CreateIndexRequest(indexName);
request.source(indexString, XContentType.JSON);
try {
  createIndexResponse = client.indices().create(request, RequestOptions.DEFAULT);
  acknowledged = createIndexResponse.isAcknowledged();
} catch (ElasticsearchException e) {
  // 생략
} catch (IOException e1) {
  // 생략
}
```

인덱스를 생성하면 `C:\elasticsearch-7.13.2\data\nodes\0\indices` 아래에 암호화된 문자열로 인덱스 폴더가 생성되고 
내부에 segments_num 파일과 write.lock 파일이 생성된다.

- `indexing()`

```java
BulkRequest bulkRequest = new BulkRequest();
for(Map<String, String> el : list) {
  bulkRequest.add(new IndexRequest(indexName).source(el));
}
BulkResponse bulkResponse = null;
try {
  bulkResponse = client.bulk(bulkRequest, RequestOptions.DEFAULT);
    } catch (IOException e) {
      // 생략
    }
 }
```

그 후 `IndexRequest` 를 통한 인덱싱(색인)이나 `BulkRequest` 를 통한 인덱싱을 하면 si(segment info) 파일과, [Compound File](https://lucene.apache.org/core/5_1_0/core/org/apache/lucene/codecs/lucene50/Lucene50CompoundFormat.html) 이 생성된다.
